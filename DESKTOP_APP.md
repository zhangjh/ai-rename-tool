# 桌面应用使用指南

## 概述

这是一个基于 Electron 的桌面应用，提供了图形化界面来使用图像重命名工具。

## 功能特性

- 🖥️ **桌面应用**：原生桌面体验，无需浏览器
- 📁 **文件选择**：支持拖拽和点击选择文件
- 🔍 **AI 分析**：集成 Google Gemini AI 进行图像分析
- 📅 **日期前缀**：自动添加 YYYY-MM-DD 格式的日期前缀
- 🔄 **离线模式**：当无法访问 AI API 时使用离线分析
- 👀 **实时预览**：重命名前预览所有更改
- 📊 **进度显示**：实时显示处理进度
- 🛡️ **安全操作**：预览模式确保操作安全

## 安装和运行

### 1. 安装依赖

```bash
npm install
```

### 2. 开发模式运行

```bash
npm run electron-dev
```

### 3. 生产模式运行

```bash
npm run electron
```

### 4. 构建可执行文件

```bash
npm run build
```

构建完成后，可执行文件将在 `dist` 目录中生成。

## 使用步骤

### 1. 启动应用

运行应用后，您会看到一个现代化的图形界面。

### 2. 配置设置

在设置区域配置：
- **API 密钥**：输入您的 Google Gemini API 密钥
- **模型名称**：选择要使用的 AI 模型
- **模式**：选择在线 AI 模式或离线模式

### 3. 选择文件

有两种方式选择文件：
- **点击选择**：点击上传区域选择文件
- **拖拽上传**：直接将文件拖拽到上传区域

### 4. 生成预览

点击"生成预览"按钮，应用会：
- 分析选中的图像文件
- 生成描述性的新文件名
- 显示预览结果

### 5. 执行重命名

确认预览结果无误后，点击"开始重命名"按钮执行实际的重命名操作。

## 界面说明

### 主界面布局

```
┌─────────────────────────────────────┐
│            🖼️ 图像重命名工具          │
│        基于 AI 的智能图像文件重命名工具 │
├─────────────────────────────────────┤
│                                     │
│  📁 选择图像文件                     │
│  拖拽文件到此处或点击选择文件         │
│                                     │
├─────────────────────────────────────┤
│  ⚙️ 设置                            │
│  ┌─────────┬─────────┬─────────────┐ │
│  │ API密钥 │ 模型名称 │ 模式        │ │
│  └─────────┴─────────┴─────────────┘ │
├─────────────────────────────────────┤
│  📋 预览重命名                       │
│  ┌─────────────────────────────────┐ │
│  │ 文件列表...                     │ │
│  └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│  [开始重命名] [取消]                 │
└─────────────────────────────────────┘
```

### 文件列表显示

每个文件项显示：
- 🖼️ 文件图标
- 原始文件名
- 文件路径
- 建议的新文件名（预览后显示）

### 状态指示

- 🟢 **绿色**：成功/正常
- 🔴 **红色**：错误/失败
- 🔵 **蓝色**：信息/处理中

## 配置说明

### API 配置

在 `config.js` 文件中可以设置默认配置：

```javascript
export const aiConfig = {
  apiKey: "your-api-key-here",
  modelName: 'gemini-1.5-flash',
  offlineMode: false,
  // 其他配置...
};
```

### 支持的模型

- `gemini-1.5-flash`：快速且经济
- `gemini-1.5-pro`：更高质量
- `gemini-2.0-flash`：最新版本

## 故障排除

### 常见问题

1. **应用无法启动**
   - 检查 Node.js 版本（需要 16+）
   - 确保所有依赖已安装

2. **API 调用失败**
   - 检查网络连接
   - 验证 API 密钥
   - 尝试使用离线模式

3. **文件权限错误**
   - 确保应用有文件读写权限
   - 检查文件是否被其他程序占用

4. **界面显示异常**
   - 尝试重启应用
   - 检查系统分辨率设置

### 日志查看

开发模式下，按 `F12` 打开开发者工具查看详细日志。

## 技术架构

### 架构图

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   渲染进程       │    │   主进程        │    │   文件系统      │
│  (Web界面)      │◄──►│  (Node.js)      │◄──►│  (本地文件)     │
│                 │    │                 │    │                 │
│ - HTML/CSS/JS   │    │ - 文件操作      │    │ - 图像文件      │
│ - 用户交互      │    │ - AI API调用    │    │ - 重命名操作    │
│ - 界面更新      │    │ - 进程管理      │    │ - 权限控制      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 技术栈

- **前端**：HTML5, CSS3, JavaScript (ES6+)
- **桌面框架**：Electron
- **后端**：Node.js
- **AI 服务**：Google Gemini API
- **构建工具**：electron-builder

## 开发指南

### 项目结构

```
rename-tool/
├── electron/              # Electron 主进程
│   ├── main.js           # 主进程入口
│   ├── preload.js        # 预加载脚本
│   └── assets/           # 应用资源
├── web-interface/        # 渲染进程界面
│   ├── index.html        # 主界面
│   └── app.js           # 界面逻辑
├── *.js                 # 核心业务逻辑
├── config.js            # 配置文件
└── package.json         # 项目配置
```

### 开发命令

```bash
# 开发模式
npm run electron-dev

# 构建应用
npm run build

# 运行命令行版本
npm start
```

## 许可证

MIT License 